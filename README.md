# HHSwarm
.NET клиент для онлайн игры [Haven &amp; Hearth](http://www.havenandhearth.com/portal/).

*[English](README.en.md), [한국어](README.ko.md), [日本語](README.ja.md), [简体中文](README.zh-cn.md), [正體中文](README.zh-tw.md)*

## Цель проекта
Игра год за годом никак не может удержать стабильное количество игроков. Всё самое интересное происходиь не дольше 6 месяцев, после чего мир пустеет.
Основная причина этого - ограниченность клиента и отсутствие клиентов для сматфонов и планшетов. Основная цель проекта - исправить это слабое место и сделать игру более популярной и интересной посредством создания нового игрового клиента с расширенным функционалом, без слабых мест оригинального клиента, с возможностью переноса на различные платформы. Так же, полное описание протоколов и внутреннего функционирования игры.

Автор игры почему-то решил, что и сервер и клиент должны быть написаны исключительна на Java, при этом исходники клиента он выкладывает в открытый доступ. Видимо, причина в том, что большая часть функционала находится в клиенте, например вся анимация объектов мира. Т.е. "классы" находятся в клиенте, а конкретные экземпляры и текстуры подгружаются с сервера. Более того, клиент может закружать исполняемый скомпилированный Java-код и исполнять его, что делает его ещё более зависимым от выбранной когда-то платформы сервера.

А ещё, очень хотелось бы исправить ужасную производительность - графическая карта используется по-минимуму, процессор загружен всегда на 100%. И как показали исследования, это - результат накопившегося старого кода и неэффективной реализации протокола связи.

## Структура в Visual Studio
  - [Native](HHSwarm.Native) - прячет сложность протокола связи за .NET интерфейсом
  - [Native.Tests](HHSwarm.Native.Tests) - вспомогательные Unit-тесты для пробы работы с частями протокола связи. Позволяет избежать использования приложений коммандной строки.
  - [TestClient](HHSwarm.TestClient) - простейший клиент без графического интерфейса. Используется для перехвата и декодирования сообщений между серевером и клиентом.
  - [Model](HHSwarm.Model) - более высокоуровневый слой, который позволяет абстрагироваться от модели (классы, названия, иерархия), на которой основана игра. Как-бы более новая и удобная, объектно-ориентированная версия модели игры.
  - [Automation](HHSwarm.Automation) - процессы автоматизации, использующие модель. Например, автоматическое избежание столкновения с деревьями.
  - **отстутствующий графический клиент** - непосредственно, игровой клиент. Предполагается использовать [Unity](https://unity.com).

## Как скомпилировать и запустить
1. Для сборки необходимы:
   1. Visual Studio 2017. Возможно, получится использовать Visual Studio 2019.
   1. .NET Framework 4.6
1. Сделайте проект **TestClient** запускаемым по-умолчанию.
1. Найдите и замените `$LoginName$` на игровое имя пользователя. Найдите и замение `$Password$` на пароль. 
1. Собственно, запустите отладку. Тестовый клиент автоматически сохраняет ключ, который возвращает сервер аутентификации, и затем использует его для захода на игровой сервер.
